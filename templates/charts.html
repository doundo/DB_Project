<!DOCTYPE html>
<html>
<head>
    <title>ì¸ê¸° ì°¨íŠ¸</title>
</head>
<body>
    <nav>
        <h1>Music Log</h1>
        <ul>
            {% if g.user %}
                <li><a href="{{ url_for('profile') }}"><strong>{{ g.user['user_name'] }}</strong></a></li>
                <li><a href="{{ url_for('charts') }}">Charts</a></li>
                <li><a href="{{ url_for('logout') }}">Log Out</a>
            {% else %}
                <li><a href="{{ url_for('register') }}">Register</a>
                <li><a href="{{ url_for('login') }}">Log In</a>
            {% endif %}
        </ul>
    </nav>
    <hr>
    
    <h2>ğŸ† ì¸ê¸° ì°¨íŠ¸</h2>

    <div style="display: flex; gap: 40px;">
        <div style="flex: 1;">
            <h3>Top 10 ìµœê³  í‰ì  ë…¸ë˜</h3>
            {% if top_songs %}
            <table border="1">
                <tr>
                    <th>ìˆœìœ„</th>
                    <th>ì œëª©</th>
                    <th>ì•„í‹°ìŠ¤íŠ¸</th>
                    <th>í‰ê·  í‰ì </th>
                    <th>í‰ê°€ ìˆ˜</th>
                </tr>
                {% for song in top_songs %}
                <tr>
                    <td>{{ loop.index }}</td>
                    <td><a href="{{ url_for('view_song', id=song['id']) }}">{{ song['song_name'] }}</a></td>
                    <td><a href="{{ url_for('view_artist', artist_id=song['artist_id']) }}">{{ song['artist_name'] }}</a></td>
                    <td>{{ "%.2f"|format(song['avg_score']|float) }}</td>
                    <td>{{ song['rating_count'] }}</td>
                </tr>
                {% endfor %}
            </table>
            {% else %}
            <p>ë°ì´í„°ê°€ ë¶€ì¡±í•˜ì—¬ ìˆœìœ„ë¥¼ ì§‘ê³„í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
            {% endif %}
        </div>

        <div style="flex: 1;">
            <h3>Top 10 ì¸ê¸° ì•„í‹°ìŠ¤íŠ¸ (í‰ê°€ ë§ì€ ìˆœ)</h3>
            {% if top_artists %}
            <table border="1">
                <tr>
                    <th>ìˆœìœ„</th>
                    <th>ì•„í‹°ìŠ¤íŠ¸</th>
                    <th>ì´ í‰ê°€ ìˆ˜</th>
                </tr>
                {% for artist in top_artists %}
                <tr>
                    <td>{{ loop.index }}</td>
                    <td><a href="{{ url_for('view_artist', artist_id=artist['id']) }}">{{ artist['artist_name'] }}</a></td>
                    <td>{{ artist['rating_count'] }}</td>
                </tr>
                {% endfor %}
            </table>
            {% else %}
            <p>ë°ì´í„°ê°€ ë¶€ì¡±í•˜ì—¬ ìˆœìœ„ë¥¼ ì§‘ê³„í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
            {% endif %}
        </div>
    </div>

    <hr style="margin-top: 20px;">
    <a href="/">[í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°]</a>
</body>
</html>
