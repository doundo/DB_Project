<!DOCTYPE html>
<html>
<head>
    <title>ì•¨ë²” ì¶”ê°€</title>
    <!-- Select2 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <style>
        /* Select2 ì»¨í…Œì´ë„ˆ ë„ˆë¹„ ì¡°ì • */
        .select2-container {
            width: 350px !important;
        }
    </style>
</head>
<body>
    <h2>ğŸ’¿ ì•¨ë²” ì¶”ê°€</h2>
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <ul class=flashes>
        {% for message in messages %}
          <li style="color: red;">{{ message }}</li>
        {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}
    <form action="{{ url_for('add_album') }}" method="post">
        <p>
            <label for="artist_id_search">ì•„í‹°ìŠ¤íŠ¸ ì„ íƒ (ê²€ìƒ‰):</label><br>
            <select id="artist_id_search" name="artist_id" required></select>
        </p>
        <p>
            <label for="album_name">ì•¨ë²” ì´ë¦„:</label><br>
            <input type="text" id="album_name" name="album_name" required size="50">
        </p>
        <p>
            <label for="release_date">ë°œë§¤ì¼ (ì„ íƒ):</label><br>
            <input type="date" id="release_date" name="release_date">
        </p>
        <p>
            <button type="submit">ì•¨ë²” ë“±ë¡</button>
        </p>
    </form>
    <a href="{{ url_for('index') }}">[ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°]</a>

    <!-- jQuery and Select2 JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script>
        $(document).ready(function() {
            $('#artist_id_search').select2({
                placeholder: "-- ê²€ìƒ‰í•˜ì—¬ ì•„í‹°ìŠ¤íŠ¸ ì„ íƒ --",
                ajax: {
                    url: "{{ url_for('search_artists') }}",
                    dataType: 'json',
                    delay: 250, // ë”œë ˆì´
                    data: function (params) {
                        return {
                            q: params.term // ê²€ìƒ‰ì–´
                        };
                    },
                    processResults: function (data) {
                        return {
                            results: data
                        };
                    },
                    cache: true
                }
            });
        });
    </script>
</body>
</html>

